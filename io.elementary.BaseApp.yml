id: io.elementary.BaseApp
runtime: org.freedesktop.Platform
sdk: org.freedesktop.Sdk
runtime-version: '18.08'
separate-locales: false
cleanup:
  - /cache
  - /man
  - /share/aclocal
  - /share/devhelp
  - /share/gtk-doc
  - /share/man
  - /lib/systemd
  - "*.la"
  - "*.a"
modules:
  - name: graphviz
    sources:
      - type: archive
        url: https://graphviz.gitlab.io/pub/graphviz/stable/SOURCES/graphviz.tar.gz
        sha256: ca5218fade0204d59947126c38439f432853543b0818d9d728c589dfe7f3a421

  - name: gobject-introspection
    cleanup-platform:
      - "*"
      - "/lib/*/gobject-introspection/giscanner"
      - "/share/gobject-introspection/giscanner"
      - "/bin"
    config-opts:
      - '--disable-static'
    ensure-writable:
      - "/lib/*/gobject-introspection/giscanner/*.pyc"
      - "/lib/*/gobject-introspection/giscanner/*/*.pyc"
    sources:
      - type: archive
        url: https://download.gnome.org/sources/gobject-introspection/1.58/gobject-introspection-1.58.3.tar.xz
        sha256: 025b632bbd944dcf11fc50d19a0ca086b83baf92b3e34936d008180d28cdc3c8

  - name: vala
    cleanup-platform:
      - "*"
    config-opts:
      - --enable-vapigen
      - --enable-unversioned
    sources:
      - type: archive
        url: https://download.gnome.org/sources/vala/0.40/vala-0.40.11.tar.xz
        sha256: 1fc591258b63cbb0721c784d8a0abedbb178f4205132a7ee3141f32667301576

  - name: libgee
    make-install-args:
      - girdir=/app/share/gir-1.0
      - typelibdir=/app/lib/girepository-1.0
    sources:
      - type: archive
        url: https://download.gnome.org/sources/libgee/0.20/libgee-0.20.1.tar.xz
        sha256: bb2802d29a518e8c6d2992884691f06ccfcc25792a5686178575c7111fea4630

  - name: granite
    buildsystem: meson
    cleanup:
      - /bin
      - /share/applications
    sources:
      - type: archive
        url: https://github.com/elementary/granite/archive/5.2.3.tar.gz
        sha256: 6ff86a90896690d25016e80e5192f87f6e9045e35ccc1db4747b92086d9b492f
    modules:
      - name: wingpanel-datetime-schema
        buildsystem: simple
        build-commands:
          - install -D io.elementary.desktop.wingpanel.datetime.gschema.xml /app/share/glib-2.0/schemas/io.elementary.desktop.wingpanel.datetime.gschema.xml
        sources:
          - type: file
            url: https://raw.githubusercontent.com/elementary/wingpanel-indicator-datetime/2.1.3/data/io.elementary.desktop.wingpanel.datetime.gschema.xml
            sha256: 6acce2a4d46a452249c13206ddc1923d23b04cb07b3433ade0f04e2995a78a82
            dest-filename: io.elementary.desktop.wingpanel.datetime.gschema.xml
  
  - name: elementary-theme
    buildsystem: meson
    sources:
      - type: archive
        url: https://github.com/elementary/stylesheet/archive/5.2.3.tar.gz
        sha256: ddc4250110b427dc5485ebb316361ef7595b5b78f7b0f9792ab61b33fa3cc3dd

  - name: elementary-icons
    buildsystem: meson
    config-opts:
      - -Dpalettes=false
    sources:
      - type: archive
        url: https://github.com/elementary/icons/archive/5.0.3.tar.gz
        sha256: 51ea67854f70990227576137498f8145468c4cf98c54417d4415bf702517d10a
